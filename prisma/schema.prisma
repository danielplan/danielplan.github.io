generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Reference {
  id           String         @id @default(uuid())
  name         String
  lead         String
  slug         String         @unique
  title        String?
  text         String?
  previewImage String
  imageSize    String
  color        String?
  link         String?
  images       String
  video        String?
  tags         ReferenceTag[]
}

model Tag {
  id         String         @id @default(uuid())
  name       String
  color      String
  references ReferenceTag[]
  posts      PostTag[]
}

model ReferenceTag {
  reference   Reference @relation(fields: [referenceId], references: [id])
  referenceId String
  tag         Tag       @relation(fields: [tagId], references: [id])
  tagId       String

  @@id([tagId, referenceId])
}

model Post {
  id           String    @id @default(uuid())
  name         String
  previewImage String
  slug         String    @unique
  lead         String
  body         String
  readTime     Int
  createDate   String    @default("2022-12-30")
  tags         PostTag[]
}

model PostTag {
  post   Post   @relation(fields: [postId], references: [id])
  postId String
  tag    Tag    @relation(fields: [tagId], references: [id])
  tagId  String

  @@id([tagId, postId])
}
